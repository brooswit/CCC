os.loadAPI("module")
module.update('ld')
module.update('config')

module.require('ld')
module.require('config')

while true do
  ldClientSideId = config.get("ld-client-side-id")
  ld.init(ldClientSideId)

  ldFlagKey = config.get("ld-flag-key")
  value = ld.variation(ldFlagKey, false)

  for key,side in pairs(redstone.getSides()) do
    redstone.setOutput(side, value)
  end

  sleep(0)
end
