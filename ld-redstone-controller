os.loadAPI("module")

module.update('ld')
module.update('config')

module.require('ld')
module.require('config')

while true do
  ldClientSideId = config.get("ld-clientside-id")
  ld.init(ldClientSideId)

  ldFlagKey = os.getComputerLabel()
  value = ld.variation(ldFlagKey, false)

  for key,side in pairs(redstone.getSides()) do
    redstone.setOutput(side, value)
  end

  sleep(0)
end
