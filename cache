local store = {}

function save()
  local file = fs.open("cache.json", "w")
  file.write(textutils.serialize(store))
  file.close()
end

function ensure()
  if not fs.exists("cache.json")
    save()
  end
end

function load()
  ensure()
  local file = fs.open("cache.json", "r")
  serializedCache = file.readAll()
  file.close()
  
  store = textutils.unserialize(serializedCache)
end

function get(key)
  load()
  return store[key]
end

function set(key, value)
  store[key] = value
  save()
end
